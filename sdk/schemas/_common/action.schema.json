{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "ank://schemas/_common/common.schema.json",
  "title": "DSL $defs",
  "type": "object",
  "$defs": {
    "Address": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{40}$",
      "description": "EVM address (20 bytes, hex with 0x)"
    },
    "Uint256Str": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "Unsigned big integer as a decimal string (uint256 compatible)"
    },
    "AmountWei": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "ETH amount in wei, as a decimal string"
    },
    "BytesHexEven": {
      "type": "string",
      "pattern": "^0x([0-9a-fA-F]{2})+$",
      "description": "Even-length hex bytes prefixed by 0x"
    },
    "Hash32": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{64}$",
      "description": "32-byte hex value (keccak256 hash) with 0x prefix"
    },
    "ChainId": {
      "type": "integer",
      "minimum": 1,
      "description": "EVM chain id (EIP-155)"
    },
    "RoleOrAddress": {
      "description": "Either a known role string (lowercase snake) or a concrete address",
      "anyOf": [
        {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_]*$",
          "description": "Protocol role name as defined in the protocol index (e.g., router, liquidityPool)"
        },
        { "$ref": "ank://schemas/_common/common.schema.json#/$defs/Address" }
      ]
    }
  }
}
